#the ai Model
from re import split
from cs50 import SQL
import os
from replit import db
import sounddevice as sd
from scipy.io.wavfile import write
import time
import wavio as wv
import random
from replit.audio import InvalidFileType
import speech_recognition as sr

sr.__version__
def recognize_speech():
  audioo = ('')
  attempts = 0
  while audioo == ('') and attempts < 3:
    attempts = 0
    Recognise = sr.Recognizer()
    aud_file = input('Please enter your file: ')
    with sr.AudioFile(aud_file) as source:
      print("Recognising..")
      aud = Recognise.record(source, duration=10)
      Recognise.adjust_for_ambient_noise(source)
    try:
      audioo = Recognise.recognize_google(aud)
      print("You said:", audioo)
      if audioo == '':
        print('There is no input detected')
      else:
        print('There is an input')
      if attempts < 2:
        print('Please try again')
      return (audioo)
    except sr.UnknownValueError:
      print("Sorry, could not understand audio and Please Try Again.")
    except sr.RequestError as e:
      print(f"Error with the recognition service; {e}")
    attempts += 1
    print(attempts)
    
